---
description: Defines a standard set of text records and a compiled-metadata resolver profile for smart contract metadata in ENS
contributors: 
  - nischal.eth
  - conor.eth
ensip: 
  created: '2025-09-05'
  status: draft
---

# ENSIP-24: Contract Metadata Standard and Text Records

## Abstract

This ENSIP extends [ENSIP-5: Text Records](https://docs.ens.domains/ensip/5) and is inspired by [ENSIP-18: Profile Text Records](https://docs.ens.domains/ensip/18) but for smart contracts. It defines a set of text records and a new compiled-metadata resolver profile that should be used for smart contract metadata information, along with the format that each should have.

## Motivation

While ENS is predominantly used for naming Externally Owned Accounts (EOAs) and storing user profile data, it has seen limited adoption for contract-related purposes. Although ENS names can resolve to contract addresses and [contracts can claim primary names](https://docs.ens.domains/web/naming-contracts/), the potential for storing rich metadata within ENS records remains largely unexplored.

[ENSIP-4](https://docs.ens.domains/ensip/4) provides a precedent by allowing contract ABIs to be stored and retrieved on-chain. However, a contract is defined by much more than just its ABI and smart contracts lack a standardized on-chain way to store metadata that describes themselves. ENSIP-4 also predates source code verification services such as Sourcify that have flourished in recent years.

Storing critical metadata including source code and potentially audit details directly in ENS text records would be invaluable for users, as it enables retrieval without reliance on centralized third-party servers.

### The Key Benefits: Trust, Consistency, and Usability

- **Consistency Across Platforms**: A single, on-chain source of truth ensures that all applications display the same verified information, creating a consistent experience across wallets, chain explorers, dApps, etc.
- **Trust and Verification**: By storing links to source code through compiled-metadata and audits on-chain, users can verify a contract's integrity independently.
- **Discoverability and Connection**: The standard makes it easy to find official documentation, project websites, and social links, directly connecting the on-chain contract to its off-chain community and developers.
- **Usability**: A rich, machine-readable, and human-friendly digital identity for any contract, anchored to its ENS name.

## Specification

This specification defines a standard set of text records for storing smart contract metadata and a new resolver profile for compiled-metadata field in ENS Resolvers. It details the format for each record and new `CompiledMetadata` Interface, covering all essential information such as source code verification and security audits.

The following JSON object is a sample contract metadata structure:

```json
{
  "name": "My Awesome App",
  "description": "A token that demonstrates best practices for metadata.",
  "avatar": "ipfs://QmRRPWG96cmgTn2qSzjwr2...",
  "url": "https://myproject.com",
  "category": "defi",
  "license": "MIT",
  "docs": "https://docs.myproject.com",
  "compiled-metadata": "ipfs://QmbRQF3HA9eZ8ZLwyU...",
  "audits": [
    {
      "auditor": "OpenZeppelin",
      "report": "ipfs://QmAuditReportCID..."
    }
  ],
  "proxy": {
    "type": "erc1967",
    "target": "0x1234...cdef"
  }
}
```

General-purpose fields like `alias` (name), `description`, `avatar` and `url` are already established through community standards (ENSIP-5, ENSIP-12 and ENSIP-18).

This specification introduces the following new keys:
- `category`: The category under which the contract lies (e.g., defi, gaming, social, utility)
- `license`: The software license of the contract
- `docs`: A link to the contract's documentation
- `compiled-metadata`: URI to [contract metadata file](https://docs.soliditylang.org/en/latest/metadata.html#contract-metadata) generated by Solidity or Vyper compiler
- `audits`: An array of security audit reports
- `proxy` (optional): If the contract is a proxy, this defines its type and target address

### Contract Keys

#### Alias
- **Description**: [ENSIP-18 Alias](https://docs.ens.domains/ensip/18#alias)
- **Format**: [ENSIP-18 Alias Format](https://docs.ens.domains/ensip/18#alias)
- **Example**: `ENSRegistry`

#### Description
- **Description**: [ENSIP-18 Description](https://docs.ens.domains/ensip/18#description)
- **Format**: [ENSIP-18 Description Format](https://docs.ens.domains/ensip/18#description)
- **Example**: `ENS registry contract, main contract from where the ENS resolution starts`

#### Avatar
- **Description**: [ENSIP-12 Avatar](https://docs.ens.domains/ensip/12)
- **Format**: [ENSIP-12 Avatar Format](https://docs.ens.domains/ensip/12)
- **Example**: `ipfs://QmRRPWG96cmgTn2qSzjwr2qvfNEuhunv6FNeMFGa9bx6mQ`

#### URL
- **Description**: [ENSIP-18 URL](https://docs.ens.domains/ensip/18#url)
- **Format**: [ENSIP-18 URL Format](https://docs.ens.domains/ensip/18#url)
- **Example**: `https://app.ens.domains/`

#### Category
- **Description**: Category under which the contract lies. Major categories include: Tokens, DeFi, Gaming, DAO, Infrastructure, tools, utility, proxy, factory, etc.
- **Format**: Lowercase single word text
- **Example**: `utility`

#### License
- **Description**: The official software license under which the contract's source code is released
- **Format**: The official [SPDX license identifier](https://spdx.org/licenses/)
- **Example**: `MIT`

#### Docs
- **Description**: A link to the primary documentation for the smart contract, intended for developers and users
- **Format**: A valid HTTP, HTTPS, or IPFS URL
- **Example**: `https://docs.ens.domains/`

#### Audits
- **Description**: A record of security audits performed on the contract by third-party firms
- **Format**: A JSON array of objects, where each object contains the auditor's name and a report URI linking to the full audit document
- **Example**: `[{"auditor":"OpenZeppelin","report":"ipfs://Qm..."},{"auditor":"Consensys","report":"https://diligence.consensys.net/audits/..."}]`

#### Proxy
- **Description**: If the contract is a proxy, this defines its type and the address of the underlying implementation contract it delegates calls to
- **Format**: A JSON object with a type (e.g., "EIP-1967", "UUPS") and a target address
- **Example**: `{"type":"EIP-1967","target":"0x1234...cdef"}`

### Compiled Metadata

#### Description
Contract metadata generated by [Solidity](https://docs.soliditylang.org/en/latest/metadata.html#contract-metadata) or [Vyper](https://docs.vyperlang.org/en/latest/compiling-a-contract.html#compiler-input-and-output-json-description) compilers, containing the contract's ABI, NatSpec documentation, compiler version, settings, and source code hashes, essential for verification and interaction. Supports multiple encoding formats for different storage and access requirements.

#### Supported Encodings
To accommodate different use cases and storage constraints, several encoding formats are supported:

| ID | Format | Description |
|----|---------|-------------|
| 1  | JSON | Uncompressed JSON (standard compiler output) |
| 2  | zlib-compressed JSON | Compressed JSON for reduced storage size |
| 4  | CBOR | Binary encoding, more compact and onchain-parseable |
| 8  | URI | External storage via URI (IPFS, HTTPS, Swarm, Arweave) |
| 16 | brotli-compressed JSON | Superior compression for storage optimization |

#### Examples
- **URI**: `"ipfs://QmbRQF3HA9eZ8ZLwyU..."`
- **Compressed JSON**: Binary data representing zlib-compressed metadata
- **Uncompressed JSON**: Direct compiler output

The following is a sample of the [contract metadata file generated by the Solidity compiler](https://docs.soliditylang.org/en/latest/metadata.html#contract-metadata), with some fields omitted for brevity:

```json
{
  "compiler": {
    "keccak256": "0x123...",
    "version": "0.8.2+commit.661d1103"
  },
  "language": "Solidity",
  "output": {
    // Required: ABI definition of the contract
    "abi": [/* ... */],
    "devdoc": { /* ... */ }
  },
  "settings": {
    "compilationTarget": {
      "myDirectory/myFile.sol": "MyContract"
    },
    "libraries": {
      "MyLib.sol:MyLib": "0x123123..."
    }
    // ... other compilation settings
  },
  // Required: Compilation source files/source units, keys are file paths
  "sources": {
    "settable": {
      "content": "contract settable is owned { uint256 private x = 0; function set(uint256 _x) public { if (msg.sender == owner) x = _x; } }",
      "keccak256": "0x234..."
    },
    "myDirectory/myFile.sol": {
      "keccak256": "0x123...",
      "license": "MIT",
      // Required (unless "content" is used): Sorted URL(s)
      // to the source file, IPFS URL recommended
      "urls": [ "bzz-raw://7d7a...", "dweb:/ipfs/QmN..." ]
    }
  },
  "version": 1
}
```

The key fields in this compiler-generated metadata file are `compiler.version`, `output.abi`, `settings`, and `sources`. This information is critical as it allows anyone to interact with the contract and independently verify its source code locally.

### CompiledMetadata Resolver Profile

A new resolver interface is defined, consisting of the following method:

```solidity
/**
 * @notice Returns compiled metadata for a contract in the requested encoding format
 * @param node The ENS node to query
 * @param contentType Bitwise OR of acceptable encoding types
 * @return contentType The encoding type used in the returned data
 * @return data The compiled metadata in the specified encoding
 */
function compiledMetadata(bytes32 node, uint256 contentType) 
    external view returns (uint256, bytes memory);
```

#### Interface Specifications

- **Interface ID**: `0xd351cddf` for the `compiledMetadata(bytes32, uint256)` function, used for ERC-165 discovery
- **Parameters**:
  - `node`: The ENS node to query
  - `contentType`: Bitfield representing the bitwise OR of all encoding types the caller will accept
- **Returns**:
  - `contentType`: The encoding type used in the returned data (single bit set)
  - `data`: The compiled metadata in the specified encoding format

#### Behavior Requirements

- Resolvers supporting this field MUST return `true` when `supportsInterface(0xd351cddf)` is called
- The function must return metadata encoded using one of the requested formats
- Returns `(0, "")` if no metadata exists for the node or none of the requested formats are supported
- The compiledMetadata resolver profile is valid on both forward and reverse records

#### Recommended Format Priority

1. URI (type 8) - Most practical for large metadata files
2. Compressed formats (types 2, 16) - For moderate-sized onchain storage
3. CBOR (type 4) - For onchain parsing requirements
4. Uncompressed JSON (type 1) - Last resort due to size constraints

Implementers should support as many encoding formats as practical, with URI support recommended as the minimum implementation.

### CompiledMetadata Lookup Process

When attempting to fetch compiled metadata based on an ENS name, implementers should:

1. First attempt a compiledMetadata lookup on the name itself
2. If that lookup returns no results, attempt a reverse lookup on the Ethereum address the name resolves to

This follows the same two-step process as ENSIP-4.

### Verifying a Contract

To verify a contract without relying on any third party or centralized server is possible via URLs or the IPFS hashes of the source files, as well as the compilation settings. Everything needed to reproduce a compilation can be obtained and then compared with the bytecode of the deployed contract. You can obtain the sources and compiler settings via the compiled-metadata file generated by Solidity or Vyper compiler.

Additional technical details can be found in the [Sourcify documentation](https://docs.sourcify.dev/) and [EIP-7834](https://ethereum-magicians.org/t/eip-7834-separate-metadata-section-for-eof/22138).

## Rationale

This proposal establishes a comprehensive metadata standard for smart contracts that goes beyond the ABI-only approach of ENSIP-4. The rationale includes:

1. **Comprehensive Metadata**: Modern contracts require more than just ABIs - documentation, audits, licensing, and verification data are equally important
2. **Multi-encoding Support**: Following ENSIP-4's proven approach while accommodating larger metadata files through URI storage
3. **Standardization**: Creating consistency across wallets, explorers, and dApps in how contract metadata is displayed
4. **Decentralization**: Reducing reliance on centralized services by storing critical metadata on-chain or in decentralized storage

## Backwards Compatibility

This specification is fully backwards-compatible as it does not alter any existing ENS functionality. Although we recommend deprecating [ENSIP-4: Support for contract ABIs](https://docs.ens.domains/ensip/4/) due to lack of significant adoption and high cost associated with on-chain storage of ABIs. Given the existence of the compiled-metadata field, which already stores the ABI, we anticipate limited future utility for ENSIP-4.

While there is a possibility that some of the proposed keys (e.g., docs, category, license) may already be in use for other purposes, existing records will not be affected. To ensure interoperability, it is strongly recommended that ENS names associated with smart contracts adopt this standard for their metadata.

## Security Considerations

None

## Copyright

Copyright and related rights waived via [CC0](https://creativecommons.org/publicdomain/zero/1.0/).
